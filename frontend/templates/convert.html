<!DOCTYPE html>
<html>
<head>
    <title>Convert · DataSentinel</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}">
</head>

<body class="app">

    <header class="topbar">
        <div class="topbar-left">
            <span class="logo-text">DataSentinel</span>
            <span class="status">● System Healthy</span>
        </div>
    
        <div class="topbar-right">
            <span class="user">{{ user.name }}</span>
            <a href="/datasentinel/logout" class="btn-ghost">Logout</a>
        </div>
    </header>

<div class="layout">

    <div class="layout">
        <aside class="sidebar">

            <!-- Sidebar Header -->
            <div class="sidebar-header">
                Navigation
            </div>
        
            <!-- Core -->
            <div class="sidebar-section">Core</div>
        
            <a class="{% if request.url.path.endswith('/dashboard') %}active{% endif %}"
               href="/datasentinel/dashboard">
                Dashboard
            </a>
        
            <a class="{% if request.url.path.endswith('/validation') %}active{% endif %}"
               href="/datasentinel/validation">
                Validation
            </a>
        
            <a class="{% if request.url.path.endswith('/normalization') %}active{% endif %}"
               href="/datasentinel/normalization">
                Normalization
            </a>
        
            <a class="{% if request.url.path.endswith('/convert') %}active{% endif %}"
               href="/datasentinel/convert">
                Conversion
            </a>
        
            <a class="{% if request.url.path.endswith('/profiling') %}active{% endif %}"
               href="/datasentinel/profiling">
                Profiling
            </a>
        
            <a class="{% if request.url.path.endswith('/prediction') %}active{% endif %}"
               href="/datasentinel/prediction">
                Prediction
            </a>
        
            <div class="sidebar-divider"></div>
        
            <!-- Insights -->
            <div class="sidebar-section">Insights</div>
        
            <a class="{% if request.url.path.endswith('/reports') %}active{% endif %}"
               href="/datasentinel/reports">
                Reports
            </a>
        
            <div class="sidebar-divider"></div>
        
            <!-- System -->
            <div class="sidebar-section">System</div>
        
            <a class="{% if request.url.path.endswith('/settings') %}active{% endif %}"
               href="/datasentinel/settings">
                Settings
            </a>
        
            <a href="/datasentinel/logout">
                Logout
            </a>
        
        </aside>
        

<main class="content">

    <section class="panel">
        <h2>Convert File</h2>

        <form
            method="post"
            action="/datasentinel/convert"
            enctype="multipart/form-data"
            style="display:flex; gap:12px; align-items:center;"
        >
            <input type="file" name="file" required />

            <select name="target_format" required>
                <option value="csv">CSV</option>
                <option value="json">JSON</option>
                <option value="xlsx">XLSX</option>
            </select>

            <button class="btn-primary" type="submit">
                Convert
            </button>
        </form>
    </section>

    <section class="panel">
        <h2>Conversion History</h2>

        <table class="table">
            <thead>
                <tr>
                    <th>File</th>
                    <th>Format</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody>
                {% if records %}
                    {% for r in records %}
                    <tr>
                        <td>{{ r.original_file }}</td>
                        <td>{{ r.format }}</td>
                        <td>{{ r.created_at.strftime("%Y-%m-%d %H:%M") }}</td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" style="text-align:center; color:#64748b;">
                            No conversions yet.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </section>

</main>
</div>

</body>
</html>
