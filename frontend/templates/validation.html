<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Validation · DataSentinel</title>

    <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}">
</head>

<body class="app">

<!-- Topbar -->
<header class="topbar">
    <div class="topbar-left">
        <img src="{{ url_for('static', path='images/logo.png') }}" class="logo-img" />
        <span class="logo-text">DataSentinel</span>
        <span class="status">● System Healthy</span>
    </div>

    <div class="topbar-right">
        <span class="user">{{ user.name }}</span>
        <a href="/datasentinel/logout" class="btn-ghost">Logout</a>
    </div>
</header>

<div class="layout">

    <!-- Sidebar -->
    <aside class="sidebar">

        <div class="sidebar-header">Navigation</div>

        <div class="sidebar-section">Core</div>

        <a href="/datasentinel/dashboard">Dashboard</a>
        <a class="active" href="/datasentinel/validation">Validation</a>
        <a href="/datasentinel/normalization">Normalization</a>
        <a href="/datasentinel/convert">Conversion</a>
        <a href="/datasentinel/profiling">Profiling</a>
        <a href="/datasentinel/prediction">Prediction</a>

        <div class="sidebar-divider"></div>

        <div class="sidebar-section">Insights</div>
        <a href="/datasentinel/reports">Reports</a>

        <div class="sidebar-divider"></div>

        <div class="sidebar-section">System</div>
        <a href="/datasentinel/settings">Settings</a>
        <a href="/datasentinel/logout">Logout</a>

    </aside>

    <!-- Main -->
    <main class="content">

        <!-- Run Validation -->
        <section class="panel">
            <h2>Run Validation</h2>

            <form
                method="post"
                action="/datasentinel/validation"
                enctype="multipart/form-data"
                style="display:flex; gap:14px; align-items:center;"
            >
                <input type="file" name="file" required />

                <select name="rule_set">
                    <option value="default">Default Rules</option>
                    <option value="strict">Strict</option>
                    <option value="schema_only">Schema Only</option>
                </select>

                <button class="btn-primary" type="submit">
                    Validate
                </button>
            </form>
        </section>

        <!-- Validation History -->
        <section class="panel">
            <h2>Validation History</h2>

            <table class="table">
                <thead>
                    <tr>
                        <th>File</th>
                        <th>Status</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>
                <tbody>
                    {% if records %}
                        {% for r in records %}
                        <tr>
                            <td>{{ r.input_file }}</td>
                            <td class="ok">{{ r.status }}</td>
                            <td>{{ r.created_at.strftime("%Y-%m-%d %H:%M") }}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="3"
                                style="text-align:center; color:#64748b; padding:20px;">
                                No validations yet.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </section>

    </main>
</div>

</body>
</html>
